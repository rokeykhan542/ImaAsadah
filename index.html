<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ima Asadah | Luxury Atelier</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@200;300;400;500;600&family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        :root { --brand: #d4a373; --dark: #1c1917; --soft-bg: #fafaf9; --offer: #9f1239; }
        
        body { 
            font-family: 'Inter', sans-serif; 
            background-color: var(--soft-bg);
            cursor: none;
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
        }

        h1, h2, h3, .brand-font { font-family: 'Playfair Display', serif; letter-spacing: -0.02em; }

        /* Luxury Preloader */
        #preloader {
            position: fixed;
            inset: 0;
            background: #fff;
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: opacity 1.2s cubic-bezier(0.19, 1, 0.22, 1);
        }
        .loader-line {
            width: 100px;
            height: 1px;
            background: #eee;
            position: relative;
            overflow: hidden;
        }
        .loader-line::after {
            content: '';
            position: absolute;
            left: 0; top: 0; height: 100%; width: 50%;
            background: var(--brand);
            animation: loading 1.5s infinite ease-in-out;
        }
        @keyframes loading {
            0% { left: -50%; } 100% { left: 100%; }
        }

        /* Fluid Custom Cursor */
        #cursor {
            width: 8px;
            height: 8px;
            background: var(--brand);
            border-radius: 50%;
            position: fixed;
            pointer-events: none;
            z-index: 10000;
            transition: transform 0.1s;
        }
        #cursor-follower {
            width: 40px;
            height: 40px;
            border: 0.5px solid rgba(212, 163, 115, 0.4);
            border-radius: 50%;
            position: fixed;
            pointer-events: none;
            z-index: 9999;
            transition: transform 0.25s cubic-bezier(0.23, 1, 0.32, 1);
        }

        /* Editorial Grain Effect */
        .grain-overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background-image: url("https://grainy-gradients.vercel.app/noise.svg");
            opacity: 0.04;
            pointer-events: none;
            z-index: 9998;
        }

        /* Ultra-Smooth Reveal */
        .reveal {
            opacity: 0;
            transform: translateY(40px) scale(0.98);
            transition: opacity 1.4s cubic-bezier(0.16, 1, 0.3, 1), 
                        transform 1.4s cubic-bezier(0.16, 1, 0.3, 1);
        }
        .reveal.active {
            opacity: 1;
            transform: translateY(0) scale(1);
        }

        /* Image Hover Parallax Effect */
        .img-container {
            overflow: hidden;
            position: relative;
        }
        .img-container img {
            transition: transform 1.5s cubic-bezier(0.16, 1, 0.3, 1);
        }
        .img-container:hover img {
            transform: scale(1.08);
        }

        /* Soft Navigation Underline */
        .nav-link {
            position: relative;
            padding: 4px 0;
            color: #78716c;
            transition: color 0.4s;
        }
        .nav-link::after {
            content: '';
            position: absolute;
            bottom: 0; left: 0; width: 0; height: 1px;
            background: var(--brand);
            transition: width 0.6s cubic-bezier(0.19, 1, 0.22, 1);
        }
        .nav-link:hover { color: var(--dark); }
        .nav-link:hover::after { width: 100%; }

        /* Luxury Buttons */
        .btn-luxury {
            position: relative;
            overflow: hidden;
            transition: all 0.5s cubic-bezier(0.19, 1, 0.22, 1);
        }
        .btn-luxury:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 40px -10px rgba(212, 163, 115, 0.3);
        }

        /* Hide Scrollbar but keep functionality */
        ::-webkit-scrollbar { width: 4px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #e7e5e4; border-radius: 10px; }

        /* Smooth Page Transition Overlay */
        #page-shutter {
            position: fixed;
            inset: 0;
            background: var(--dark);
            transform: translateY(100%);
            z-index: 9999;
            transition: transform 0.8s cubic-bezier(0.77, 0, 0.175, 1);
        }
        #page-shutter.active { transform: translateY(0); }

        .marquee-container {
            overflow: hidden;
            white-space: nowrap;
            background: #1c1917;
            padding: 10px 0;
        }
        .marquee-content {
            display: inline-block;
            animation: marquee 40s linear infinite;
            color: rgba(255,255,255,0.7);
            font-size: 9px;
            letter-spacing: 0.3em;
            text-transform: uppercase;
            font-weight: 600;
        }
        @keyframes marquee {
            from { transform: translateX(0); }
            to { transform: translateX(-50%); }
        }

        /* Review Screenshot Frame */
        .screenshot-frame {
            border: 1px solid rgba(0,0,0,0.05);
            box-shadow: 0 10px 30px rgba(0,0,0,0.03);
        }
    </style>
</head>
<body>

    <!-- Visual Enhancements -->
    <div id="preloader"><div class="loader-line"></div></div>
    <div id="cursor"></div>
    <div id="cursor-follower"></div>
    <div class="grain-overlay"></div>
    <div id="page-shutter"></div>

    <!-- Announcement Bar -->
    <div class="marquee-container sticky top-0 z-[60]">
        <div class="marquee-content">
            <span class="px-12">Limited Bespoke Slots Available &nbsp; • &nbsp; Free Worldwide Shipping on orders over Rp 2.000.000 &nbsp; • &nbsp; Luxury Handcrafted Tailoring &nbsp; • &nbsp; </span>
            <span class="px-12">Limited Bespoke Slots Available &nbsp; • &nbsp; Free Worldwide Shipping on orders over Rp 2.000.000 &nbsp; • &nbsp; Luxury Handcrafted Tailoring &nbsp; • &nbsp; </span>
        </div>
    </div>

    <!-- Header -->
    <nav id="navbar" class="w-full bg-white/60 backdrop-blur-xl z-50 border-b border-stone-100 transition-all duration-700">
        <div class="max-w-7xl mx-auto px-8 py-6 flex justify-between items-center">
            <div class="hidden md:flex items-center space-x-10 text-[9px] font-bold uppercase tracking-[0.3em]">
                <a href="javascript:void(0)" onclick="transitionTo('home')" class="nav-link">Home</a>
                <a href="javascript:void(0)" onclick="transitionTo('catalog')" class="nav-link">Catalog</a>
            </div>
            
            <div class="brand-font text-2xl font-bold tracking-[-0.05em] cursor-pointer" onclick="transitionTo('home')">
                IMA ASADAH
            </div>

            <div class="flex items-center space-x-10 text-[9px] font-bold uppercase tracking-[0.3em]">
                <div class="hidden md:flex space-x-10">
                    <a href="javascript:void(0)" onclick="transitionTo('owner')" class="nav-link">Atelier</a>
                    <a href="javascript:void(0)" onclick="transitionTo('contact')" class="nav-link">Contact</a>
                </div>
                <button onclick="transitionTo('catalog')" class="hover:text-[#d4a373] transition-colors"><i data-lucide="search" class="w-4 h-4"></i></button>
            </div>
        </div>
    </nav>

    <!-- Home Page -->
    <main id="home-page" class="opacity-100 transition-opacity duration-1000">
        <!-- Hero -->
        <section class="relative h-[92vh] flex items-center justify-center overflow-hidden bg-stone-200">
            <img id="hero-img" src="https://images.unsplash.com/photo-1490481651871-ab68de25d43d?q=80&w=2070" class="absolute inset-0 w-full h-full object-cover brightness-[0.85] scale-110" alt="Hero">
            <div class="relative z-10 text-center text-white px-6">
                <div class="reveal active">
                    <span class="text-[10px] uppercase tracking-[0.8em] font-medium mb-8 block opacity-80">Since 2015 — Jakarta</span>
                    <h1 class="text-7xl md:text-[10rem] font-bold mb-10 leading-[0.85] italic tracking-tighter">Pure<br>Elegance</h1>
                    <div class="flex flex-col sm:flex-row gap-8 justify-center items-center mt-12">
                        <button onclick="transitionTo('catalog')" class="btn-luxury bg-white text-stone-900 px-12 py-5 rounded-full text-[10px] font-bold uppercase tracking-[0.2em]">View Collection</button>
                        <button onclick="transitionTo('owner')" class="text-white border-b border-white/30 pb-1 text-[10px] font-bold uppercase tracking-[0.2em] hover:border-white transition-all">The Atelier Story</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Visual Categories -->
        <section class="py-32 px-8 max-w-7xl mx-auto">
            <div id="category-grid-container" class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <!-- Dynamically filled -->
            </div>
        </section>

        <!-- Product Highlight -->
        <section class="py-40 px-8 max-w-7xl mx-auto">
            <div class="flex flex-col md:flex-row justify-between items-end mb-24 reveal">
                <div>
                    <span class="text-[#d4a373] text-[9px] font-bold uppercase tracking-[0.5em] mb-4 block">New Arrivals</span>
                    <h2 class="text-5xl md:text-7xl brand-font italic">Seasonal Picks</h2>
                </div>
                <p class="max-w-xs text-stone-400 text-xs leading-loose font-light italic mt-6 md:mt-0">Curated pieces that define modern sophistication through timeless silhouettes.</p>
            </div>
            <div id="featured-grid" class="grid grid-cols-2 lg:grid-cols-4 gap-12"></div>
        </section>

        <!-- Testimonials (Atelier Voices) -->
        <section class="py-40 bg-stone-100 overflow-hidden">
            <div class="max-w-7xl mx-auto px-8">
                <div class="text-center mb-32 reveal">
                    <span class="text-[#d4a373] text-[9px] font-bold uppercase tracking-[0.5em] mb-4 block">Kind Words</span>
                    <h2 class="text-5xl brand-font italic">Atelier Voices</h2>
                </div>
                <div id="testimonial-grid" class="grid md:grid-cols-2 lg:grid-cols-3 gap-16">
                    <!-- Dynamically filled -->
                </div>
            </div>
        </section>

        <!-- Design Philosophy / Owner Section Short -->
        <section class="py-32 bg-white relative">
            <div class="max-w-7xl mx-auto px-8 grid md:grid-cols-2 gap-24 items-center">
                <div class="reveal img-container rounded-[2rem]">
                    <img id="owner-feature-img" src="" class="w-full aspect-[4/5] object-cover" alt="Detail">
                </div>
                <div class="reveal space-y-12">
                    <div>
                        <span class="text-[#d4a373] text-[9px] font-bold uppercase tracking-[0.5em] mb-4 block">Our Ethos</span>
                        <h2 class="text-5xl brand-font italic mb-10" id="owner-short-title">Meticulous Detail,<br>Personalized Fit</h2>
                        <p class="text-stone-500 text-lg font-light leading-relaxed" id="owner-short-bio">Kami percaya bahwa setiap jahitan membawa cerita.</p>
                    </div>
                    <div class="space-y-8">
                        <div class="flex gap-6 group">
                            <div class="text-[#d4a373] pt-1"><i data-lucide="award" class="w-5 h-5"></i></div>
                            <div>
                                <h4 class="text-[10px] font-bold uppercase tracking-widest mb-2">Premium Sourcing</h4>
                                <p class="text-xs text-stone-400 font-light">Silk, Linen, and Lace sourced from the finest mills.</p>
                            </div>
                        </div>
                        <div class="flex gap-6 group">
                            <div class="text-[#d4a373] pt-1"><i data-lucide="heart" class="w-5 h-5"></i></div>
                            <div>
                                <h4 class="text-[10px] font-bold uppercase tracking-widest mb-2">Soulful Tailoring</h4>
                                <p class="text-xs text-stone-400 font-light">Designed to embrace every curve with grace.</p>
                            </div>
                        </div>
                    </div>
                    <button onclick="transitionTo('owner')" class="btn-luxury inline-flex items-center gap-6 bg-stone-900 text-white px-12 py-5 rounded-full text-[10px] font-bold uppercase tracking-[0.3em]">
                        Read Our Story <i data-lucide="arrow-right" class="w-4 h-4"></i>
                    </button>
                </div>
            </div>
        </section>

        <!-- Visual Footer -->
        <footer class="bg-[#1c1917] text-white pt-40 pb-20 px-8">
            <div class="max-w-7xl mx-auto">
                <div class="text-center mb-40 reveal">
                    <h2 class="text-4xl md:text-8xl brand-font italic mb-12 opacity-90">Ima Asadah</h2>
                    <div id="socials-container" class="flex justify-center space-x-12">
                        <!-- Dynamically filled -->
                    </div>
                </div>
                <div class="grid md:grid-cols-3 gap-20 border-t border-white/5 pt-20">
                    <div class="text-[10px] text-stone-500 leading-loose tracking-widest uppercase">
                        &copy; 2024 Atelier Ima Asadah.<br>Handcrafted in Indonesia.
                    </div>
                    <div class="flex flex-col space-y-4 text-[10px] uppercase tracking-widest font-bold">
                        <a href="javascript:void(0)" onclick="transitionTo('catalog')" class="hover:text-[#d4a373]">Lookbook</a>
                        <a href="javascript:void(0)" onclick="transitionTo('contact')" class="hover:text-[#d4a373]">Book Appointment</a>
                    </div>
                    <div class="text-[10px] text-stone-500 leading-loose tracking-widest uppercase md:text-right">
                        Jl. Fashionista No. 123,<br>Jakarta Selatan, ID.
                    </div>
                </div>
            </div>
        </footer>
    </main>

    <!-- Owner Page -->
    <main id="owner-page" class="hidden opacity-0 py-40 px-8 bg-stone-50">
        <div class="max-w-4xl mx-auto">
            <div class="reveal mb-24 text-center">
                <span class="text-[#d4a373] text-[9px] font-bold uppercase tracking-[0.5em] mb-4 block">The Founder</span>
                <h2 id="full-owner-name" class="text-6xl md:text-8xl brand-font italic mb-12">Ima Asadah</h2>
            </div>
            <div class="grid md:grid-cols-2 gap-16 items-start mb-32">
                <div class="reveal img-container rounded-[3rem]">
                    <img id="full-owner-img" src="" class="w-full object-cover aspect-[3/4]">
                </div>
                <div class="reveal space-y-8 py-12">
                    <p id="full-owner-bio" class="text-stone-600 text-lg leading-loose font-light italic">
                        The journey began with a single needle and a vision for timeless beauty.
                    </p>
                    <div class="pt-8 border-t border-stone-200">
                        <h4 class="text-[10px] font-bold uppercase tracking-widest mb-4">Core Philosophy</h4>
                        <p class="text-sm text-stone-500 leading-relaxed">Setiap wanita berhak merasa istimewa. Kami tidak hanya membuat pakaian, kami membangun kepercayaan diri melalui siluet yang presisi.</p>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Catalog Page -->
    <main id="catalog-page" class="hidden opacity-0 py-40 px-8">
        <div class="max-w-7xl mx-auto">
            <div class="flex flex-col md:flex-row justify-between items-center mb-32 border-b border-stone-100 pb-12">
                <h2 class="text-6xl brand-font italic">Archive</h2>
                <div class="flex gap-12 mt-12 md:mt-0">
                    <select id="cat-filter" onchange="renderCatalog()" class="bg-transparent border-none text-[10px] font-bold uppercase tracking-[0.3em] outline-none cursor-pointer hover:text-[#d4a373] transition-colors">
                        <option value="all">Everything</option>
                    </select>
                    <select id="sort-order" onchange="renderCatalog()" class="bg-transparent border-none text-[10px] font-bold uppercase tracking-[0.3em] outline-none cursor-pointer hover:text-[#d4a373] transition-colors">
                        <option value="new">Latest</option>
                        <option value="low">Value: Low</option>
                        <option value="high">Value: High</option>
                    </select>
                </div>
            </div>
            <div id="catalog-grid" class="grid grid-cols-2 md:grid-cols-4 gap-12"></div>
        </div>
    </main>

    <!-- Contact Page -->
    <main id="contact-page" class="hidden opacity-0 py-40 px-8 bg-stone-50">
        <div class="max-w-7xl mx-auto">
            <div class="reveal mb-24">
                <span class="text-[#d4a373] text-[9px] font-bold uppercase tracking-[0.5em] mb-4 block">Get in Touch</span>
                <h2 class="text-6xl md:text-8xl brand-font italic mb-4">The Atelier</h2>
                <p class="text-stone-400 font-light italic">We invite you to experience our craft firsthand.</p>
            </div>
            
            <div class="grid lg:grid-cols-12 gap-16 items-start">
                <!-- Info Column -->
                <div class="lg:col-span-4 space-y-16 reveal">
                    <div>
                        <h4 class="text-[10px] font-bold uppercase tracking-widest text-[#d4a373] mb-6">Location</h4>
                        <p class="text-stone-600 text-lg leading-relaxed font-light">
                            Jl. Fashionista No. 123,<br>
                            Kebayoran Baru, Jakarta Selatan<br>
                            Indonesia, 12160
                        </p>
                    </div>

                    <div>
                        <h4 class="text-[10px] font-bold uppercase tracking-widest text-[#d4a373] mb-6">Hours</h4>
                        <ul class="text-stone-600 space-y-3 font-light">
                            <li class="flex justify-between"><span>Mon — Fri</span> <span class="font-medium">10:00 - 18:00</span></li>
                            <li class="flex justify-between"><span>Saturday</span> <span class="font-medium">11:00 - 16:00</span></li>
                            <li class="flex justify-between"><span>Sunday</span> <span class="text-stone-300">By Appointment</span></li>
                        </ul>
                    </div>

                    <div>
                        <h4 class="text-[10px] font-bold uppercase tracking-widest text-[#d4a373] mb-6">Direct Inquiries</h4>
                        <div class="space-y-4">
                            <a href="mailto:atelier@imaasadah.com" class="block text-stone-800 hover:text-[#d4a373] transition-colors">atelier@imaasadah.com</a>
                            <a href="javascript:void(0)" onclick="orderWhatsApp()" class="block text-stone-800 hover:text-[#d4a373] transition-colors">+62 857 3233 5094</a>
                        </div>
                    </div>

                    <button onclick="orderWhatsApp()" class="btn-luxury w-full bg-stone-900 text-white py-6 rounded-full text-[10px] font-bold uppercase tracking-[0.3em]">
                        Book Private Consultation
                    </button>
                </div>

                <!-- Map Column -->
                <div class="lg:col-span-8 reveal">
                    <div class="w-full aspect-[16/9] lg:aspect-auto lg:h-[600px] bg-stone-200 rounded-[3rem] overflow-hidden shadow-2xl relative">
                        <iframe 
                            class="absolute inset-0 w-full h-full grayscale opacity-80 hover:opacity-100 transition-opacity duration-700"
                            src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d126906.84223405788!2d106.71967704386708!3d-6.284897262279184!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x2e69f3e945e3fa73%3A0x196132034058f435!2sSouth%20Jakarta%2C%20South%20Jakarta%20City%2C%20Jakarta!5e0!3m2!1sen!2sid!4v1715638100234!5m2!1sen!2sid" 
                            style="border:0;" 
                            allowfullscreen="" 
                            loading="lazy" 
                            referrerpolicy="no-referrer-when-downgrade">
                        </iframe>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Proof Modal -->
    <div id="proof-modal" class="fixed inset-0 z-[110] hidden bg-stone-900/40 backdrop-blur-md flex items-center justify-center p-8">
        <div class="relative max-w-lg w-full scale-90 opacity-0 transition-all duration-700" id="proof-content">
            <button onclick="closeProof()" class="absolute -top-12 right-0 p-2 text-white hover:rotate-90 transition-transform"><i data-lucide="x" class="w-6 h-6"></i></button>
            <div class="bg-white p-4 rounded-3xl screenshot-frame">
                <img id="proof-img" src="" class="w-full h-auto rounded-2xl shadow-inner">
            </div>
        </div>
    </div>

    <!-- Modal -->
    <div id="product-modal" class="fixed inset-0 z-[100] hidden bg-stone-900/60 backdrop-blur-xl flex items-center justify-center p-8">
        <div class="bg-white w-full max-w-5xl rounded-[3rem] overflow-hidden shadow-2xl relative flex flex-col md:flex-row scale-90 opacity-0 transition-all duration-700" id="modal-content">
            <button onclick="closeModal()" class="absolute top-10 right-10 z-10 p-2 hover:rotate-90 transition-transform duration-500"><i data-lucide="x" class="w-6 h-6 text-stone-400"></i></button>
            <div class="w-full md:w-1/2 aspect-[4/5] img-container">
                <img id="modal-img" src="" class="w-full h-full object-cover">
            </div>
            <div class="w-full md:w-1/2 p-16 flex flex-col justify-center">
                <div class="flex justify-between items-start mb-6">
                    <span id="modal-cat" class="text-[9px] text-[#d4a373] uppercase tracking-[0.5em] font-bold block">Category</span>
                    <span id="modal-offer-tag" class="hidden text-[8px] font-bold uppercase tracking-widest text-white bg-[#9f1239] px-4 py-1.5 rounded-full">Limited Offer</span>
                </div>
                <h3 id="modal-title" class="text-5xl font-bold mb-6 brand-font italic">Product Name</h3>
                <div class="flex items-center gap-6 mb-10">
                    <p id="modal-price" class="text-2xl font-light text-stone-400">Rp 0</p>
                    <p id="modal-old-price" class="hidden text-sm text-stone-300 line-through">Rp 0</p>
                </div>
                <p id="modal-desc" class="text-stone-500 text-sm leading-relaxed mb-12 font-light">Detailed product description...</p>
                <div id="modal-stock-info" class="mb-10 text-[9px] font-bold uppercase tracking-[0.2em] text-stone-400">Availability: High</div>
                <button id="modal-btn" onclick="orderWhatsApp()" class="btn-luxury w-full bg-stone-900 text-white py-6 rounded-full text-[10px] font-bold uppercase tracking-[0.3em]">Enquire via WhatsApp</button>
            </div>
        </div>
    </div>

    <script>
        // --- DYNAMIC DATA SOURCE ---
        const siteData = {
            owner: {
                name: "Ima Asadah",
                shortBio: "Founder & Creative Director. Mendedikasikan diri untuk melestarikan keahlian menjahit tangan melalui siluet modern yang berkelas.",
                fullBio: "Lahir dari kecintaan pada kain berkualitas tinggi dan desain minimalis, Ima Asadah membangun atelier ini dengan prinsip 'Simplicity is the ultimate sophistication'. Perjalanan yang dimulai dari butik kecil di Jakarta kini berkembang menjadi rumah mode bespoke yang mengutamakan kenyamanan dan elegansi setiap kliennya.",
                img: "https://raw.githubusercontent.com/rokeykhan542/ImaAsadah/main/photos/Gemini_Generated_Image_hv40a7hv40a7hv40.png",
                featureImg: "https://images.unsplash.com/photo-1537832816519-689ad163238b?q=80&w=2070"
            },
            categories: [
                { name: "Dresses", type: "Curated", img: "https://images.unsplash.com/photo-1595777457583-95e059d581b8?w=800" },
                { name: "Tops", type: "Essential", img: "https://images.unsplash.com/photo-1551163943-3f6a855d1153?w=800", shifted: true },
                { name: "Outerwear", type: "Timeless", img: "https://images.unsplash.com/photo-1591047139829-d91aecb6caea?w=800" }
            ],
            products: [
                { id: 1, name: "Linen Gathered Dress", price: 450000, oldPrice: 520000, category: "Dresses", img: "https://images.unsplash.com/photo-1595777457583-95e059d581b8?w=800", stock: 12, desc: "A breathable, fluid silhouette handcrafted from sustainably sourced linen. Perfect for golden hour gatherings." },
                { id: 2, name: "Silk Wrap Blouse", price: 320000, category: "Tops", img: "https://images.unsplash.com/photo-1551163943-3f6a855d1153?w=800", stock: 0, desc: "Liquid silk that moves with you. This wrap design features hand-finished seams and a timeless collar." },
                { id: 3, name: "Autumn Trench Coat", price: 650000, category: "Outerwear", img: "https://images.unsplash.com/photo-1591047139829-d91aecb6caea?w=800", stock: 5, desc: "The definitive outerwear piece. Structured yet soft, designed to be layered for a sophisticated transitional look." },
                { id: 4, name: "Minimalist Camisole", price: 185000, category: "Tops", img: "https://images.unsplash.com/photo-1604176354204-926873ff3da9?w=800", stock: 24, desc: "A masterclass in minimalism. Fine straps and a subtle sheen make this the ultimate foundation piece." },
                { id: 5, name: "Satin Evening Dress", price: 680000, oldPrice: 850000, category: "Dresses", img: "https://images.unsplash.com/photo-1566174053879-31528523f8ae?w=800", stock: 2, desc: "Dramatically draped satin for your most memorable evenings. Features a hidden side zip and floor-length hem." }
            ],
            reviews: [
                { name: "Sarah K.", role: "Verified Collector", text: "Bahannya benar-benar premium. Jahitannya sangat rapi, jauh di atas ekspektasi saya untuk butik lokal. Pasti akan pesan lagi!", avatar: "https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=100", proof: "https://images.unsplash.com/photo-1512436991641-6745cdb1723f?w=800" },
                { name: "Maya R.", role: "Atelier Client", text: "Linen dress-nya sangat adem. Fitting-nya pas sekali di badan, seperti dibuat khusus untuk saya. Thank you Kak Ima!", avatar: "https://images.unsplash.com/photo-1534528741775-53994a69daeb?w=100", proof: null },
                { name: "Indah P.", role: "New Member", text: "Proses order sangat smooth. Admin sangat membantu konsultasi size. Bajunya mewah sekali dipakainya.", avatar: "https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=100", proof: "https://images.unsplash.com/photo-1558769132-cb1aea458c5e?w=800" }
            ],
            socials: [
                { name: "Instagram", link: "#" },
                { name: "Facebook", link: "#" },
                { name: "WhatsApp", link: "#" }
            ]
        };

        // --- CORE LOGIC ---
        const cursor = document.getElementById('cursor');
        const follower = document.getElementById('cursor-follower');
        let cursorActive = false;
        let activeProduct = null;

        document.addEventListener('mousemove', e => {
            if(!cursorActive && cursor && follower) { 
                cursor.style.opacity = 1; 
                follower.style.opacity = 1; 
                cursorActive = true; 
            }
            if (cursor && follower) {
                cursor.style.transform = `translate3d(${e.clientX - 4}px, ${e.clientY - 4}px, 0)`;
                follower.style.transform = `translate3d(${e.clientX - 20}px, ${e.clientY - 20}px, 0)`;
            }
        });

        function transitionTo(pageId, categoryFilter = 'all') {
            const shutter = document.getElementById('page-shutter');
            if (shutter) shutter.classList.add('active');
            
            setTimeout(() => {
                document.querySelectorAll('main').forEach(m => {
                    m.classList.add('hidden');
                    m.classList.remove('opacity-100');
                });
                
                const target = document.getElementById(`${pageId}-page`);
                if (target) {
                    target.classList.remove('hidden');
                    
                    if(pageId === 'catalog') {
                        const catFilterEl = document.getElementById('cat-filter');
                        if(catFilterEl) catFilterEl.value = categoryFilter;
                        renderCatalog();
                    }
                    if(pageId === 'home') renderHome();
                    if(pageId === 'owner') renderOwner();
                    // contact page is static content
                    
                    window.scrollTo(0,0);
                    if (shutter) shutter.classList.remove('active');
                    
                    setTimeout(() => {
                        target.classList.add('opacity-100');
                        initObservers();
                    }, 100);
                }
            }, 800);
        }

        // --- RENDERERS ---

        function renderHome() {
            // Render Categories
            const catGrid = document.getElementById('category-grid-container');
            if (catGrid) {
                catGrid.innerHTML = siteData.categories.map(cat => `
                    <div class="reveal relative group cursor-pointer overflow-hidden rounded-[2rem] aspect-[3/4] ${cat.shifted ? 'md:translate-y-12' : ''}" onclick="transitionTo('catalog', '${cat.name}')">
                        <img src="${cat.img}" class="w-full h-full object-cover transition-transform duration-1000 group-hover:scale-110">
                        <div class="absolute inset-0 bg-black/20 group-hover:bg-black/40 transition-colors flex flex-col justify-end p-12">
                            <span class="text-white text-[9px] font-bold uppercase tracking-[0.5em] mb-2 opacity-70">${cat.type}</span>
                            <h3 class="text-white text-4xl brand-font italic">${cat.name}</h3>
                        </div>
                    </div>
                `).join('');
            }

            // Render Featured Products
            const grid = document.getElementById('featured-grid');
            if (grid) {
                grid.innerHTML = '';
                siteData.products.slice(0, 4).forEach((p, i) => grid.appendChild(createProductCard(p, i)));
            }

            // Render Testimonials
            const testGrid = document.getElementById('testimonial-grid');
            if (testGrid) {
                testGrid.innerHTML = siteData.reviews.map((rev, i) => `
                    <div class="reveal group bg-white p-12 rounded-[2rem] shadow-sm hover:shadow-xl transition-all duration-700" style="transition-delay: ${i*100}ms">
                        <div class="flex mb-8 gap-1">
                            ${Array(5).fill('<i data-lucide="star" class="w-3 h-3 fill-[#d4a373] text-[#d4a373]"></i>').join('')}
                        </div>
                        <p class="text-stone-600 text-sm leading-relaxed mb-8 italic">"${rev.text}"</p>
                        <div class="flex items-center justify-between">
                            <div class="flex items-center gap-4">
                                <div class="w-10 h-10 rounded-full bg-stone-200 overflow-hidden">
                                    <img src="${rev.avatar}" class="w-full h-full object-cover">
                                </div>
                                <div>
                                    <h4 class="text-[10px] font-bold uppercase tracking-widest">${rev.name}</h4>
                                    <p class="text-[8px] text-stone-400 uppercase tracking-widest">${rev.role}</p>
                                </div>
                            </div>
                            ${rev.proof ? `<button onclick="viewReviewProof('${rev.proof}')" class="text-[8px] font-bold uppercase tracking-widest text-[#d4a373] border-b border-[#d4a373]/20 hover:border-[#d4a373] transition-all">View Proof</button>` : ''}
                        </div>
                    </div>
                `).join('');
            }

            // Owner Snippet
            const ownerFeatureImg = document.getElementById('owner-feature-img');
            const ownerShortBio = document.getElementById('owner-short-bio');
            if (ownerFeatureImg) ownerFeatureImg.src = siteData.owner.featureImg;
            if (ownerShortBio) ownerShortBio.innerText = siteData.owner.shortBio;

            // Socials
            const socialsContainer = document.getElementById('socials-container');
            if (socialsContainer) {
                socialsContainer.innerHTML = siteData.socials.map(s => `
                    <a href="${s.link}" class="text-[10px] uppercase tracking-[0.4em] font-bold opacity-40 hover:opacity-100 transition-opacity">${s.name}</a>
                `).join('');
            }

            if (typeof lucide !== 'undefined') lucide.createIcons();
            addHoverListeners();
        }

        function renderOwner() {
            const name = document.getElementById('full-owner-name');
            const img = document.getElementById('full-owner-img');
            const bio = document.getElementById('full-owner-bio');
            if (name) name.innerText = siteData.owner.name;
            if (img) img.src = siteData.owner.img;
            if (bio) bio.innerText = siteData.owner.fullBio;
            if (typeof lucide !== 'undefined') lucide.createIcons();
        }

        function renderCatalog() {
            const grid = document.getElementById('catalog-grid');
            if (!grid) return;

            const filterEl = document.getElementById('cat-filter');
            const sortEl = document.getElementById('sort-order');
            const filter = filterEl ? filterEl.value : 'all';
            const sort = sortEl ? sortEl.value : 'new';
            
            // Re-populate category filter if empty
            const catSelect = document.getElementById('cat-filter');
            if(catSelect && catSelect.options.length <= 1) {
                siteData.categories.forEach(c => {
                    const opt = document.createElement('option');
                    opt.value = c.name;
                    opt.innerText = c.name;
                    catSelect.appendChild(opt);
                });
            }

            let list = filter === 'all' ? [...siteData.products] : siteData.products.filter(p => p.category === filter);
            if (sort === 'low') list.sort((a,b) => a.price - b.price);
            if (sort === 'high') list.sort((a,b) => b.price - a.price);

            grid.innerHTML = '';
            list.forEach((p, i) => grid.appendChild(createProductCard(p, i)));
            initObservers();
            addHoverListeners();
        }

        function createProductCard(p, index) {
            const isOffer = p.oldPrice && p.oldPrice > p.price;
            const isSoldOut = p.stock === 0;

            const div = document.createElement('div');
            div.className = `reveal group cursor-pointer`;
            div.style.transitionDelay = `${index * 50}ms`;
            div.onclick = () => openModal(p);
            div.innerHTML = `
                <div class="relative img-container rounded-[2rem] aspect-[3/4] mb-8 bg-stone-100">
                    <img src="${p.img}" class="w-full h-full object-cover ${isSoldOut ? 'grayscale' : ''}">
                    
                    ${isOffer ? `
                        <div class="absolute top-6 left-6 z-10">
                            <span class="bg-[#9f1239] text-white text-[8px] font-bold uppercase tracking-widest px-4 py-2 rounded-full shadow-lg">Special Offer</span>
                        </div>
                    ` : ''}

                    ${isSoldOut ? `
                        <div class="absolute inset-0 flex items-center justify-center bg-white/40 backdrop-blur-[2px]">
                            <span class="bg-white/90 text-[#1c1917] px-8 py-3 rounded-full text-[9px] font-bold uppercase tracking-widest shadow-xl">Archive Only</span>
                        </div>
                    ` : ''}
                </div>
                <div>
                    <span class="text-[9px] text-[#d4a373] uppercase tracking-[0.4em] font-bold mb-2 block">${p.category}</span>
                    <h3 class="brand-font text-xl italic mb-1">${p.name}</h3>
                    <div class="flex items-center gap-4">
                        <p class="text-xs text-stone-500 font-medium">Rp ${p.price.toLocaleString()}</p>
                        ${isOffer ? `<p class="text-[10px] text-stone-300 line-through">Rp ${p.oldPrice.toLocaleString()}</p>` : ''}
                    </div>
                </div>
            `;
            return div;
        }

        // --- UTILS ---
        function openModal(p) {
            activeProduct = p;
            const img = document.getElementById('modal-img');
            const title = document.getElementById('modal-title');
            const cat = document.getElementById('modal-cat');
            const price = document.getElementById('modal-price');
            const oldPrice = document.getElementById('modal-old-price');
            const offerTag = document.getElementById('modal-offer-tag');
            const stockInfo = document.getElementById('modal-stock-info');
            const desc = document.getElementById('modal-desc');
            const btn = document.getElementById('modal-btn');
            const content = document.getElementById('modal-content');
            const modal = document.getElementById('product-modal');

            if (img) img.src = p.img;
            if (title) title.innerText = p.name;
            if (cat) cat.innerText = p.category;
            if (price) price.innerText = `Rp ${p.price.toLocaleString()}`;
            
            // Handle Offer
            if(p.oldPrice && oldPrice && offerTag) {
                oldPrice.innerText = `Rp ${p.oldPrice.toLocaleString()}`;
                oldPrice.classList.remove('hidden');
                offerTag.classList.remove('hidden');
            } else if (oldPrice && offerTag) {
                oldPrice.classList.add('hidden');
                offerTag.classList.add('hidden');
            }

            // Handle Stock
            if(stockInfo && btn) {
                if(p.stock === 0) {
                    stockInfo.innerText = "Current Status: Archived (Sold Out)";
                    stockInfo.classList.add('text-[#9f1239]');
                    btn.innerText = "Request Restock Notification";
                    btn.classList.replace('bg-stone-900', 'bg-stone-200');
                    btn.classList.add('text-stone-600');
                } else {
                    stockInfo.innerText = p.stock < 5 ? `Availability: Limited (${p.stock} remaining)` : "Availability: In Stock";
                    stockInfo.classList.remove('text-[#9f1239]');
                    btn.innerText = "Enquire via WhatsApp";
                    btn.classList.replace('bg-stone-200', 'bg-stone-900');
                    btn.classList.remove('text-stone-600');
                }
            }

            if (desc) desc.innerText = p.desc;
            
            if (modal) {
                modal.classList.remove('hidden');
                setTimeout(() => {
                    if (content) content.classList.remove('scale-90', 'opacity-0');
                }, 10);
                document.body.style.overflow = 'hidden';
            }
        }

        function closeModal() {
            const content = document.getElementById('modal-content');
            const modal = document.getElementById('product-modal');
            if (content) content.classList.add('scale-90', 'opacity-0');
            setTimeout(() => {
                if (modal) modal.classList.add('hidden');
                document.body.style.overflow = 'auto';
            }, 500);
        }

        function viewReviewProof(imgUrl) {
            const proofImg = document.getElementById('proof-img');
            const modal = document.getElementById('proof-modal');
            const content = document.getElementById('proof-content');

            if (proofImg) proofImg.src = imgUrl;
            if (modal) {
                modal.classList.remove('hidden');
                setTimeout(() => {
                    if (content) content.classList.remove('scale-90', 'opacity-0');
                }, 10);
                document.body.style.overflow = 'hidden';
            }
        }

        function closeProof() {
            const content = document.getElementById('proof-content');
            const modal = document.getElementById('proof-modal');
            if (content) content.classList.add('scale-90', 'opacity-0');
            setTimeout(() => {
                if (modal) modal.classList.add('hidden');
                document.body.style.overflow = 'auto';
            }, 500);
        }

        function orderWhatsApp() {
            let msg = "";
            if (activeProduct) {
                if(activeProduct.stock === 0) {
                    msg = `Hello Ima Asadah! I missed out on the ${activeProduct.name}. Will it be available for custom order or restocked?`;
                } else {
                    msg = `Hello Ima Asadah! I am interested in the ${activeProduct.name}.`;
                }
            } else {
                msg = "Hello Ima Asadah! I'd like to book a bespoke tailoring consultation or discuss a custom commission.";
            }
            window.open(`https://wa.me/6285732335094?text=${encodeURIComponent(msg)}`, '_blank');
        }

        function addHoverListeners() {
            document.querySelectorAll('a, button, select, .cursor-pointer').forEach(el => {
                el.addEventListener('mouseenter', () => {
                    if (follower) follower.style.transform += ' scale(1.5)';
                });
                el.addEventListener('mouseleave', () => {
                    if (follower) follower.style.transform = follower.style.transform.replace(' scale(1.5)', '');
                });
            });
        }

        function initObservers() {
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) entry.target.classList.add('active');
                });
            }, { threshold: 0.1 });
            document.querySelectorAll('.reveal').forEach(el => observer.observe(el));
        }

        window.onload = () => {
            renderHome();
            setTimeout(() => {
                const preloader = document.getElementById('preloader');
                if (preloader) {
                    preloader.style.opacity = '0';
                    setTimeout(() => {
                        preloader.style.display = 'none';
                        initObservers();
                    }, 1200);
                }
            }, 1000);
            if (typeof lucide !== 'undefined') lucide.createIcons();
        };

        window.addEventListener('scroll', () => {
            const scrolled = window.pageYOffset;
            const heroImg = document.getElementById('hero-img');
            if(heroImg) heroImg.style.transform = `scale(1.1) translateY(${scrolled * 0.15}px)`;
            
            const nav = document.getElementById('navbar');
            if(nav) {
                if(scrolled > 50) {
                    nav.classList.add('py-4', 'bg-white/90');
                    nav.classList.remove('py-6', 'bg-white/60');
                } else {
                    nav.classList.add('py-6', 'bg-white/60');
                    nav.classList.remove('py-4', 'bg-white/90');
                }
            }
        });
    </script>
</body>
</html>